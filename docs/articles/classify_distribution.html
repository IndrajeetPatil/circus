<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Classify Distributions using Machine Learning â€¢ circus</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Classify Distributions using Machine Learning">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">circus</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/bayesian_indices.html">Systematic Simulation of Bayesian Models</a>
    </li>
    <li>
      <a href="../articles/bootstrapped.html">Bootsrapped data</a>
    </li>
    <li>
      <a href="../articles/classify_distribution.html">Classify Distributions using Machine Learning</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Classify Distributions using Machine Learning</h1>
            
      
      
      <div class="hidden name"><code>classify_distribution.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>The goal of this article is to create a machine learning model able to classify the distribution family of the data.</p>
</div>
<div id="methods" class="section level1">
<h1 class="hasAnchor">
<a href="#methods" class="anchor"></a>Methods</h1>
<div id="parameters-and-packages" class="section level2">
<h2 class="hasAnchor">
<a href="#parameters-and-packages" class="anchor"></a>Parameters and Packages</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># Plotting</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ggplot2)</a>
<a class="sourceLine" id="cb1-3" title="3"></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="co"># Modelling</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(caret)</a>
<a class="sourceLine" id="cb1-6" title="6"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(strip)</a>
<a class="sourceLine" id="cb1-7" title="7"><span class="co"># library(parsnip)</span></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="co"># library(rsample)</span></a>
<a class="sourceLine" id="cb1-9" title="9"></a>
<a class="sourceLine" id="cb1-10" title="10"><span class="co"># Optimizing</span></a>
<a class="sourceLine" id="cb1-11" title="11"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(parallel)</a>
<a class="sourceLine" id="cb1-12" title="12"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(doParallel)</a>
<a class="sourceLine" id="cb1-13" title="13"></a>
<a class="sourceLine" id="cb1-14" title="14"><span class="co"># Analyzing</span></a>
<a class="sourceLine" id="cb1-15" title="15"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(parameters)</a>
<a class="sourceLine" id="cb1-16" title="16"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(bayestestR)</a>
<a class="sourceLine" id="cb1-17" title="17"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(report)</a>
<a class="sourceLine" id="cb1-18" title="18"></a>
<a class="sourceLine" id="cb1-19" title="19"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Random">set.seed</a></span>(<span class="dv">333</span>)</a></code></pre></div>
</div>
<div id="visualisation-of-distributions" class="section level2">
<h2 class="hasAnchor">
<a href="#visualisation-of-distributions" class="anchor"></a>Visualisation of distributions</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">distributions &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>()</a>
<a class="sourceLine" id="cb2-2" title="2">size &lt;-<span class="st">  </span><span class="dv">1000</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="cf">for</span>(location <span class="cf">in</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Round">round</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/seq">seq</a></span>(<span class="fl">0.01</span>, <span class="dv">10</span>, <span class="dt">length.out =</span> <span class="dv">5</span>), <span class="dt">digits=</span><span class="dv">2</span>)){</a>
<a class="sourceLine" id="cb2-4" title="4">  <span class="cf">for</span>(scale <span class="cf">in</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Round">round</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/seq">seq</a></span>(<span class="fl">0.02</span>, <span class="dv">10</span>, <span class="dt">length.out =</span> <span class="dv">5</span>), <span class="dt">digits=</span><span class="dv">2</span>)){</a>
<a class="sourceLine" id="cb2-5" title="5">    x &lt;-<span class="st"> </span>parameters<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/parameters/topics/normalize">normalize</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.data.frame">as.data.frame</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/density">density</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Normal">rnorm</a></span>(size, location, scale), <span class="dt">n=</span><span class="dv">100</span>)))</a>
<a class="sourceLine" id="cb2-6" title="6">    x<span class="op">$</span>distribution &lt;-<span class="st"> "normal"</span></a>
<a class="sourceLine" id="cb2-7" title="7">    x<span class="op">$</span>location &lt;-<span class="st"> </span>location</a>
<a class="sourceLine" id="cb2-8" title="8">    x<span class="op">$</span>scale &lt;-<span class="st"> </span>scale</a>
<a class="sourceLine" id="cb2-9" title="9">    distributions &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(distributions, x)</a>
<a class="sourceLine" id="cb2-10" title="10">    </a>
<a class="sourceLine" id="cb2-11" title="11">    x &lt;-<span class="st"> </span>parameters<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/parameters/topics/normalize">normalize</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.data.frame">as.data.frame</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/density">density</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Beta">rbeta</a></span>(size, location, scale), <span class="dt">n=</span><span class="dv">100</span>)))</a>
<a class="sourceLine" id="cb2-12" title="12">    x<span class="op">$</span>distribution &lt;-<span class="st"> "beta"</span></a>
<a class="sourceLine" id="cb2-13" title="13">    x<span class="op">$</span>location &lt;-<span class="st"> </span>location</a>
<a class="sourceLine" id="cb2-14" title="14">    x<span class="op">$</span>scale &lt;-<span class="st"> </span>scale</a>
<a class="sourceLine" id="cb2-15" title="15">    distributions &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(distributions, x)</a>
<a class="sourceLine" id="cb2-16" title="16">    </a>
<a class="sourceLine" id="cb2-17" title="17">    x &lt;-<span class="st"> </span>parameters<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/parameters/topics/normalize">normalize</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.data.frame">as.data.frame</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/density">density</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Binomial">rbinom</a></span>(size, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Round">round</a></span>(location)<span class="op">+</span><span class="dv">1</span>, scale<span class="op">/</span><span class="dv">10</span><span class="op">^</span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/nchar">nchar</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Round">round</a></span>(scale)))), <span class="dt">n=</span><span class="dv">100</span>)))</a>
<a class="sourceLine" id="cb2-18" title="18">    x<span class="op">$</span>distribution &lt;-<span class="st"> "binomial"</span></a>
<a class="sourceLine" id="cb2-19" title="19">    x<span class="op">$</span>location &lt;-<span class="st"> </span>location</a>
<a class="sourceLine" id="cb2-20" title="20">    x<span class="op">$</span>scale &lt;-<span class="st"> </span>scale</a>
<a class="sourceLine" id="cb2-21" title="21">    distributions &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(distributions, x)</a>
<a class="sourceLine" id="cb2-22" title="22">    </a>
<a class="sourceLine" id="cb2-23" title="23">    x &lt;-<span class="st"> </span>parameters<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/parameters/topics/normalize">normalize</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.data.frame">as.data.frame</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/density">density</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Chisquare">rchisq</a></span>(size, location, scale), <span class="dt">n=</span><span class="dv">100</span>)))</a>
<a class="sourceLine" id="cb2-24" title="24">    x<span class="op">$</span>distribution &lt;-<span class="st"> "chi"</span></a>
<a class="sourceLine" id="cb2-25" title="25">    x<span class="op">$</span>location &lt;-<span class="st"> </span>location</a>
<a class="sourceLine" id="cb2-26" title="26">    x<span class="op">$</span>scale &lt;-<span class="st"> </span>scale</a>
<a class="sourceLine" id="cb2-27" title="27">    distributions &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(distributions, x)</a>
<a class="sourceLine" id="cb2-28" title="28">    </a>
<a class="sourceLine" id="cb2-29" title="29">    x &lt;-<span class="st"> </span>parameters<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/parameters/topics/normalize">normalize</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.data.frame">as.data.frame</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/density">density</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Exponential">rexp</a></span>(size, scale), <span class="dt">n=</span><span class="dv">100</span>)))</a>
<a class="sourceLine" id="cb2-30" title="30">    x<span class="op">$</span>distribution &lt;-<span class="st"> "exponential"</span></a>
<a class="sourceLine" id="cb2-31" title="31">    x<span class="op">$</span>location &lt;-<span class="st"> </span>location</a>
<a class="sourceLine" id="cb2-32" title="32">    x<span class="op">$</span>scale &lt;-<span class="st"> </span>scale</a>
<a class="sourceLine" id="cb2-33" title="33">    distributions &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(distributions, x)</a>
<a class="sourceLine" id="cb2-34" title="34">    </a>
<a class="sourceLine" id="cb2-35" title="35">    x &lt;-<span class="st"> </span>parameters<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/parameters/topics/normalize">normalize</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.data.frame">as.data.frame</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/density">density</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Fdist">rf</a></span>(size, location, scale), <span class="dt">n=</span><span class="dv">100</span>)))</a>
<a class="sourceLine" id="cb2-36" title="36">    x<span class="op">$</span>distribution &lt;-<span class="st"> "F"</span></a>
<a class="sourceLine" id="cb2-37" title="37">    x<span class="op">$</span>location &lt;-<span class="st"> </span>location</a>
<a class="sourceLine" id="cb2-38" title="38">    x<span class="op">$</span>scale &lt;-<span class="st"> </span>scale</a>
<a class="sourceLine" id="cb2-39" title="39">    distributions &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(distributions, x)</a>
<a class="sourceLine" id="cb2-40" title="40">    </a>
<a class="sourceLine" id="cb2-41" title="41">    x &lt;-<span class="st"> </span>parameters<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/parameters/topics/normalize">normalize</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.data.frame">as.data.frame</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/density">density</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/GammaDist">rgamma</a></span>(size, location, scale), <span class="dt">n=</span><span class="dv">100</span>)))</a>
<a class="sourceLine" id="cb2-42" title="42">    x<span class="op">$</span>distribution &lt;-<span class="st"> "gamma"</span></a>
<a class="sourceLine" id="cb2-43" title="43">    x<span class="op">$</span>location &lt;-<span class="st"> </span>location</a>
<a class="sourceLine" id="cb2-44" title="44">    x<span class="op">$</span>scale &lt;-<span class="st"> </span>scale</a>
<a class="sourceLine" id="cb2-45" title="45">    distributions &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(distributions, x)</a>
<a class="sourceLine" id="cb2-46" title="46">    </a>
<a class="sourceLine" id="cb2-47" title="47">    x &lt;-<span class="st"> </span>parameters<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/parameters/topics/normalize">normalize</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.data.frame">as.data.frame</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/density">density</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Lognormal">rlnorm</a></span>(size, location, scale), <span class="dt">n=</span><span class="dv">100</span>)))</a>
<a class="sourceLine" id="cb2-48" title="48">    x<span class="op">$</span>distribution &lt;-<span class="st"> "lognormal"</span></a>
<a class="sourceLine" id="cb2-49" title="49">    x<span class="op">$</span>location &lt;-<span class="st"> </span>location</a>
<a class="sourceLine" id="cb2-50" title="50">    x<span class="op">$</span>scale &lt;-<span class="st"> </span>scale</a>
<a class="sourceLine" id="cb2-51" title="51">    distributions &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(distributions, x)</a>
<a class="sourceLine" id="cb2-52" title="52">    </a>
<a class="sourceLine" id="cb2-53" title="53">    x &lt;-<span class="st"> </span>parameters<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/parameters/topics/normalize">normalize</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.data.frame">as.data.frame</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/density">density</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Poisson">rpois</a></span>(size, location), <span class="dt">n=</span><span class="dv">100</span>)))</a>
<a class="sourceLine" id="cb2-54" title="54">    x<span class="op">$</span>distribution &lt;-<span class="st"> "poisson"</span></a>
<a class="sourceLine" id="cb2-55" title="55">    x<span class="op">$</span>location &lt;-<span class="st"> </span>location</a>
<a class="sourceLine" id="cb2-56" title="56">    x<span class="op">$</span>scale &lt;-<span class="st"> </span>scale</a>
<a class="sourceLine" id="cb2-57" title="57">    distributions &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(distributions, x)</a>
<a class="sourceLine" id="cb2-58" title="58">    </a>
<a class="sourceLine" id="cb2-59" title="59">    x &lt;-<span class="st"> </span>parameters<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/parameters/topics/normalize">normalize</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.data.frame">as.data.frame</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/density">density</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/TDist">rt</a></span>(size, location, scale), <span class="dt">n=</span><span class="dv">100</span>)))</a>
<a class="sourceLine" id="cb2-60" title="60">    x<span class="op">$</span>distribution &lt;-<span class="st"> "t"</span></a>
<a class="sourceLine" id="cb2-61" title="61">    x<span class="op">$</span>location &lt;-<span class="st"> </span>location</a>
<a class="sourceLine" id="cb2-62" title="62">    x<span class="op">$</span>scale &lt;-<span class="st"> </span>scale</a>
<a class="sourceLine" id="cb2-63" title="63">    distributions &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(distributions, x)</a>
<a class="sourceLine" id="cb2-64" title="64">    </a>
<a class="sourceLine" id="cb2-65" title="65">    x &lt;-<span class="st"> </span>parameters<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/parameters/topics/normalize">normalize</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.data.frame">as.data.frame</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/density">density</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Uniform">runif</a></span>(size, location, location<span class="op">*</span><span class="dv">2</span>), <span class="dt">n=</span><span class="dv">100</span>)))</a>
<a class="sourceLine" id="cb2-66" title="66">    x<span class="op">$</span>distribution &lt;-<span class="st"> "uniform"</span></a>
<a class="sourceLine" id="cb2-67" title="67">    x<span class="op">$</span>location &lt;-<span class="st"> </span>location</a>
<a class="sourceLine" id="cb2-68" title="68">    x<span class="op">$</span>scale &lt;-<span class="st"> </span>scale</a>
<a class="sourceLine" id="cb2-69" title="69">    distributions &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(distributions, x)</a>
<a class="sourceLine" id="cb2-70" title="70">    </a>
<a class="sourceLine" id="cb2-71" title="71">    x &lt;-<span class="st"> </span>parameters<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/parameters/topics/normalize">normalize</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.data.frame">as.data.frame</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/density">density</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Weibull">rweibull</a></span>(size, location, scale), <span class="dt">n=</span><span class="dv">100</span>)))</a>
<a class="sourceLine" id="cb2-72" title="72">    x<span class="op">$</span>distribution &lt;-<span class="st"> "weibull"</span></a>
<a class="sourceLine" id="cb2-73" title="73">    x<span class="op">$</span>location &lt;-<span class="st"> </span>location</a>
<a class="sourceLine" id="cb2-74" title="74">    x<span class="op">$</span>scale &lt;-<span class="st"> </span>scale</a>
<a class="sourceLine" id="cb2-75" title="75">    distributions &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(distributions, x)</a>
<a class="sourceLine" id="cb2-76" title="76">  }</a>
<a class="sourceLine" id="cb2-77" title="77">}</a>
<a class="sourceLine" id="cb2-78" title="78"><span class="kw">ggplot</span>(distributions, <span class="kw">aes</span>(<span class="dt">x=</span>x, <span class="dt">y=</span>y, <span class="dt">colour=</span>distribution)) <span class="op">+</span></a>
<a class="sourceLine" id="cb2-79" title="79"><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">size=</span><span class="dv">1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb2-80" title="80"><span class="st">  </span><span class="kw">facet_grid</span>(location <span class="op">~</span><span class="st"> </span>scale) <span class="op">+</span></a>
<a class="sourceLine" id="cb2-81" title="81"><span class="st">  </span><span class="kw">theme_classic</span>()</a></code></pre></div>
<p><img src="classify_distribution_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
<div id="convenience-function" class="section level3">
<h3 class="hasAnchor">
<a href="#convenience-function" class="anchor"></a>Convenience function</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">generate_distribution &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">family=</span><span class="st">"normal"</span>, <span class="dt">size=</span><span class="dv">1000</span>, <span class="dt">noise=</span><span class="dv">0</span>, <span class="dt">location=</span><span class="dv">0</span>, <span class="dt">scale=</span><span class="dv">1</span>){</a>
<a class="sourceLine" id="cb3-2" title="2">  <span class="cf">if</span>(family <span class="op">==</span><span class="st"> "normal"</span>){</a>
<a class="sourceLine" id="cb3-3" title="3">    x &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Normal">rnorm</a></span>(size, location, scale)</a>
<a class="sourceLine" id="cb3-4" title="4">  } <span class="cf">else</span> <span class="cf">if</span>(family <span class="op">==</span><span class="st"> "beta"</span>){</a>
<a class="sourceLine" id="cb3-5" title="5">    x &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Beta">rbeta</a></span>(size, location, scale)</a>
<a class="sourceLine" id="cb3-6" title="6">  } <span class="cf">else</span> <span class="cf">if</span>(family <span class="op">==</span><span class="st"> "binomial"</span>){</a>
<a class="sourceLine" id="cb3-7" title="7">    x &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Binomial">rbinom</a></span>(size, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Round">round</a></span>(location)<span class="op">+</span><span class="dv">1</span>, scale<span class="op">/</span><span class="dv">10</span><span class="op">^</span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/nchar">nchar</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Round">round</a></span>(scale))))</a>
<a class="sourceLine" id="cb3-8" title="8">  } <span class="cf">else</span> <span class="cf">if</span>(family <span class="op">==</span><span class="st"> "chi"</span>){</a>
<a class="sourceLine" id="cb3-9" title="9">    x &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Chisquare">rchisq</a></span>(size, location, scale)</a>
<a class="sourceLine" id="cb3-10" title="10">  } <span class="cf">else</span> <span class="cf">if</span>(family <span class="op">==</span><span class="st"> "exponential"</span>){</a>
<a class="sourceLine" id="cb3-11" title="11">    x &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Exponential">rexp</a></span>(size, scale)</a>
<a class="sourceLine" id="cb3-12" title="12">  } <span class="cf">else</span> <span class="cf">if</span>(family <span class="op">==</span><span class="st"> "F"</span>){</a>
<a class="sourceLine" id="cb3-13" title="13">    x &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Fdist">rf</a></span>(size, location, scale<span class="fl">+0.1</span>)</a>
<a class="sourceLine" id="cb3-14" title="14">  } <span class="cf">else</span> <span class="cf">if</span>(family <span class="op">==</span><span class="st"> "gamma"</span>){</a>
<a class="sourceLine" id="cb3-15" title="15">    x &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/GammaDist">rgamma</a></span>(size, location, scale)</a>
<a class="sourceLine" id="cb3-16" title="16">  } <span class="cf">else</span> <span class="cf">if</span>(family <span class="op">==</span><span class="st"> "lognormal"</span>){</a>
<a class="sourceLine" id="cb3-17" title="17">    x &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Lognormal">rlnorm</a></span>(size, location, scale)</a>
<a class="sourceLine" id="cb3-18" title="18">  } <span class="cf">else</span> <span class="cf">if</span>(family <span class="op">==</span><span class="st"> "poisson"</span>){</a>
<a class="sourceLine" id="cb3-19" title="19">    x &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Poisson">rpois</a></span>(size, location)</a>
<a class="sourceLine" id="cb3-20" title="20">  } <span class="cf">else</span> <span class="cf">if</span>(family <span class="op">==</span><span class="st"> "t"</span>){</a>
<a class="sourceLine" id="cb3-21" title="21">    x &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/TDist">rt</a></span>(size, location, scale)</a>
<a class="sourceLine" id="cb3-22" title="22">  } <span class="cf">else</span> <span class="cf">if</span>(family <span class="op">==</span><span class="st"> "uniform"</span>){</a>
<a class="sourceLine" id="cb3-23" title="23">    x &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Uniform">runif</a></span>(size, location, location<span class="op">*</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb3-24" title="24">  } <span class="cf">else</span> <span class="cf">if</span>(family <span class="op">==</span><span class="st"> "weibull"</span>){</a>
<a class="sourceLine" id="cb3-25" title="25">    x &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Weibull">rweibull</a></span>(size, location, scale)</a>
<a class="sourceLine" id="cb3-26" title="26">  }</a>
<a class="sourceLine" id="cb3-27" title="27">  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/function">return</a></span>(x)</a>
<a class="sourceLine" id="cb3-28" title="28">}</a></code></pre></div>
</div>
<div id="data-generation" class="section level3">
<h3 class="hasAnchor">
<a href="#data-generation" class="anchor"></a>Data generation</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">df &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>()</a>
<a class="sourceLine" id="cb4-2" title="2"><span class="cf">for</span>(distribution <span class="cf">in</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"normal"</span>, <span class="st">"beta"</span>, <span class="st">"binomial"</span>, <span class="st">"chi"</span>, <span class="st">"exponential"</span>, <span class="st">"F"</span>, <span class="st">"gamma"</span>, <span class="st">"lognormal"</span>, <span class="st">"poisson"</span>, <span class="st">"t"</span>, <span class="st">"uniform"</span>, <span class="st">"weibull"</span>)){</a>
<a class="sourceLine" id="cb4-3" title="3">  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">2000</span>){</a>
<a class="sourceLine" id="cb4-4" title="4">    </a>
<a class="sourceLine" id="cb4-5" title="5">    size &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Round">round</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Uniform">runif</a></span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">2000</span>))</a>
<a class="sourceLine" id="cb4-6" title="6">    location &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Uniform">runif</a></span>(<span class="dv">1</span>, <span class="fl">0.01</span>, <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb4-7" title="7">    scale &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Uniform">runif</a></span>(<span class="dv">1</span>, <span class="fl">0.02</span>, <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb4-8" title="8">    </a>
<a class="sourceLine" id="cb4-9" title="9">    x &lt;-<span class="st"> </span><span class="kw">generate_distribution</span>(distribution, <span class="dt">size=</span>size, <span class="dt">location=</span>location, <span class="dt">scale=</span>scale)</a>
<a class="sourceLine" id="cb4-10" title="10">    </a>
<a class="sourceLine" id="cb4-11" title="11">    x[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/is.finite">is.infinite</a></span>(x)] &lt;-<span class="st"> </span><span class="fl">5.565423e+156</span></a>
<a class="sourceLine" id="cb4-12" title="12">    x_scaled &lt;-<span class="st"> </span>parameters<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/parameters/topics/normalize">normalize</a></span>(x, <span class="dt">verbose=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb4-13" title="13">    </a>
<a class="sourceLine" id="cb4-14" title="14">    density_Z &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/density">density</a></span>(x_scaled, <span class="dt">n=</span><span class="dv">20</span>)<span class="op">$</span>y</a>
<a class="sourceLine" id="cb4-15" title="15">    </a>
<a class="sourceLine" id="cb4-16" title="16">    <span class="co"># Extract features</span></a>
<a class="sourceLine" id="cb4-17" title="17">    data &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(</a>
<a class="sourceLine" id="cb4-18" title="18">      <span class="st">"Mean"</span> =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(x_scaled),</a>
<a class="sourceLine" id="cb4-19" title="19">      <span class="st">"SD"</span> =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/sd">sd</a></span>(x_scaled),</a>
<a class="sourceLine" id="cb4-20" title="20">      <span class="st">"Median"</span> =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/median">median</a></span>(x_scaled),</a>
<a class="sourceLine" id="cb4-21" title="21">      <span class="st">"MAD"</span> =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/mad">mad</a></span>(x_scaled, <span class="dt">constant=</span><span class="dv">1</span>),</a>
<a class="sourceLine" id="cb4-22" title="22">      <span class="st">"Mean_Median_Distance"</span> =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(x_scaled) <span class="op">-</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/median">median</a></span>(x_scaled),</a>
<a class="sourceLine" id="cb4-23" title="23">      <span class="st">"Mean_Mode_Distance"</span> =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(x_scaled) <span class="op">-</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/numeric">as.numeric</a></span>(bayestestR<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/bayestestR/topics/map_estimate">map_estimate</a></span>(x_scaled, <span class="dt">bw =</span> <span class="st">"nrd0"</span>)),</a>
<a class="sourceLine" id="cb4-24" title="24">      <span class="st">"SD_MAD_Distance"</span> =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/sd">sd</a></span>(x_scaled) <span class="op">-</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/mad">mad</a></span>(x_scaled, <span class="dt">constant=</span><span class="dv">1</span>),</a>
<a class="sourceLine" id="cb4-25" title="25">      <span class="st">"Mode"</span> =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/numeric">as.numeric</a></span>(bayestestR<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/bayestestR/topics/map_estimate">map_estimate</a></span>(x_scaled, <span class="dt">bw =</span> <span class="st">"nrd0"</span>)),</a>
<a class="sourceLine" id="cb4-26" title="26">      <span class="co"># "Range" = range(x),</span></a>
<a class="sourceLine" id="cb4-27" title="27">      <span class="st">"Range_SD"</span> =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/diff">diff</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/range">range</a></span>(x)) <span class="op">/</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/sd">sd</a></span>(x),</a>
<a class="sourceLine" id="cb4-28" title="28">      <span class="st">"Range_MAD"</span> =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/diff">diff</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/range">range</a></span>(x)) <span class="op">/</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/mad">mad</a></span>(x, <span class="dt">constant=</span><span class="dv">1</span>),</a>
<a class="sourceLine" id="cb4-29" title="29">      <span class="st">"IQR"</span> =<span class="st"> </span>stats<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/IQR">IQR</a></span>(x_scaled),</a>
<a class="sourceLine" id="cb4-30" title="30">      <span class="st">"Skewness"</span> =<span class="st"> </span><span class="kw">skewness</span>(x_scaled),</a>
<a class="sourceLine" id="cb4-31" title="31">      <span class="st">"Kurtosis"</span> =<span class="st"> </span><span class="kw">kurtosis</span>(x_scaled),</a>
<a class="sourceLine" id="cb4-32" title="32">      <span class="st">"Uniques"</span> =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/unique">unique</a></span>(x)) <span class="op">/</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(x),</a>
<a class="sourceLine" id="cb4-33" title="33">      <span class="st">"Smoothness_Cor"</span> =<span class="st"> </span>parameters<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/parameters/topics/smoothness">smoothness</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/density">density</a></span>(x_scaled)<span class="op">$</span>y, <span class="dt">method=</span><span class="st">"cor"</span>),</a>
<a class="sourceLine" id="cb4-34" title="34">      <span class="st">"Smoothness_Diff"</span> =<span class="st"> </span>parameters<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/parameters/topics/smoothness">smoothness</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/density">density</a></span>(x_scaled)<span class="op">$</span>y, <span class="dt">method=</span><span class="st">"diff"</span>),</a>
<a class="sourceLine" id="cb4-35" title="35">      <span class="st">"Smoothness_Z_Cor_1"</span> =<span class="st"> </span>parameters<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/parameters/topics/smoothness">smoothness</a></span>(density_Z, <span class="dt">method=</span><span class="st">"cor"</span>, <span class="dt">lag=</span><span class="dv">1</span>),</a>
<a class="sourceLine" id="cb4-36" title="36">      <span class="st">"Smoothness_Z_Diff_1"</span> =<span class="st"> </span>parameters<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/parameters/topics/smoothness">smoothness</a></span>(density_Z, <span class="dt">method=</span><span class="st">"diff"</span>, <span class="dt">lag=</span><span class="dv">1</span>),</a>
<a class="sourceLine" id="cb4-37" title="37">      <span class="st">"Smoothness_Z_Cor_3"</span> =<span class="st"> </span>parameters<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/parameters/topics/smoothness">smoothness</a></span>(density_Z, <span class="dt">method=</span><span class="st">"cor"</span>, <span class="dt">lag=</span><span class="dv">3</span>),</a>
<a class="sourceLine" id="cb4-38" title="38">      <span class="st">"Smoothness_Z_Diff_3"</span> =<span class="st"> </span>parameters<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/parameters/topics/smoothness">smoothness</a></span>(density_Z, <span class="dt">method=</span><span class="st">"diff"</span>, <span class="dt">lag=</span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb4-39" title="39">    )</a>
<a class="sourceLine" id="cb4-40" title="40">    </a>
<a class="sourceLine" id="cb4-41" title="41">    </a>
<a class="sourceLine" id="cb4-42" title="42">    density_df &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.data.frame">as.data.frame</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/t">t</a></span>(density_Z))</a>
<a class="sourceLine" id="cb4-43" title="43">    <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(density_df) &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste0</a></span>(<span class="st">"Density_"</span>, <span class="dv">1</span><span class="op">:</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/nrow">ncol</a></span>(density_df))</a>
<a class="sourceLine" id="cb4-44" title="44">    data &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">cbind</a></span>(data, density_df)</a>
<a class="sourceLine" id="cb4-45" title="45">    </a>
<a class="sourceLine" id="cb4-46" title="46">    <span class="cf">if</span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/unique">unique</a></span>(x)) <span class="op">==</span><span class="st"> </span><span class="dv">1</span>){</a>
<a class="sourceLine" id="cb4-47" title="47">      data<span class="op">$</span>Distribution &lt;-<span class="st"> "uniform"</span></a>
<a class="sourceLine" id="cb4-48" title="48">    } <span class="cf">else</span>{</a>
<a class="sourceLine" id="cb4-49" title="49">      data<span class="op">$</span>Distribution &lt;-<span class="st"> </span>distribution</a>
<a class="sourceLine" id="cb4-50" title="50">    }</a>
<a class="sourceLine" id="cb4-51" title="51">    </a>
<a class="sourceLine" id="cb4-52" title="52">    df &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(df, data)</a>
<a class="sourceLine" id="cb4-53" title="53">  }</a>
<a class="sourceLine" id="cb4-54" title="54">  <span class="co"># write.csv(df, "classify_distribution.csv", row.names = FALSE)</span></a>
<a class="sourceLine" id="cb4-55" title="55">}</a></code></pre></div>
</div>
</div>
</div>
<div id="results" class="section level1">
<h1 class="hasAnchor">
<a href="#results" class="anchor"></a>Results</h1>
<div id="model-training" class="section level2">
<h2 class="hasAnchor">
<a href="#model-training" class="anchor"></a>Model training</h2>
<div id="preparation" class="section level3">
<h3 class="hasAnchor">
<a href="#preparation" class="anchor"></a>Preparation</h3>
<!-- ```{r eval=FALSE, message=FALSE, warning=FALSE, include=FALSE} -->
<!-- # parsnip attempt -->
<!-- # Data clearning -->
<!-- df <- na.omit(df) -->
<!-- infinite <- is.infinite(rowSums(df[sapply(df, is.numeric)])) -->
<!-- df <- df[!infinite, ] -->
<!-- # Data partitioning -->
<!-- df_split <- rsample::initial_split(df, prop = 0.8, strata = "Distribution") -->
<!-- train <- training(df_split) -->
<!-- test  <- testing(df_split) -->
<!-- pipeline <- -->
<!--   recipes::recipe(Distribution ~ ., data = train) %>% -->
<!--   recipes::prep(training = train, retain = TRUE) -->
<!-- test <- recipes::bake(pipeline, new_data = test) -->
<!-- model_tree <- -->
<!--   decision_tree(mode = "classification") %>% -->
<!--   set_engine("rpart") %>% -->
<!--   fit(Distribution ~ ., data = recipes::juice(pipeline)) -->
<!-- test_results <- -->
<!--   data.frame( -->
<!--     Distribution = test$Distribution, -->
<!--     predicted_class = predict(model_tree, new_data = test) %>% -->
<!--       pull(.pred_class) -->
<!--   ) -->
<!-- yardstick::roc_auc(test_results, truth = Distribution, predicted_class) -->
<!-- yardstick::accuracy(test_results, truth = Distribution, predicted_class) -->
<!-- yardstick::conf_mat(test_results, truth = Distribution, predicted_class) -->
<!-- ``` -->
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="co"># Data clearning</span></a>
<a class="sourceLine" id="cb5-2" title="2">df &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/na.fail">na.omit</a></span>(df)</a>
<a class="sourceLine" id="cb5-3" title="3">infinite &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/is.finite">is.infinite</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/colSums">rowSums</a></span>(df[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">sapply</a></span>(df, is.numeric)]))</a>
<a class="sourceLine" id="cb5-4" title="4">df &lt;-<span class="st"> </span>df[<span class="op">!</span>infinite, ]</a>
<a class="sourceLine" id="cb5-5" title="5"></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="co"># Data partitioning</span></a>
<a class="sourceLine" id="cb5-7" title="7"></a>
<a class="sourceLine" id="cb5-8" title="8"></a>
<a class="sourceLine" id="cb5-9" title="9">trainIndex &lt;-<span class="st"> </span>caret<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/caret/topics/createDataPartition">createDataPartition</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">as.factor</a></span>(df<span class="op">$</span>Distribution), <span class="dt">p=</span><span class="fl">0.1</span>, <span class="dt">list =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb5-10" title="10">train &lt;-<span class="st"> </span>df[ trainIndex,]</a>
<a class="sourceLine" id="cb5-11" title="11">test  &lt;-<span class="st"> </span>df[<span class="op">-</span>trainIndex,]</a>
<a class="sourceLine" id="cb5-12" title="12"></a>
<a class="sourceLine" id="cb5-13" title="13"></a>
<a class="sourceLine" id="cb5-14" title="14"><span class="co"># Parameters</span></a>
<a class="sourceLine" id="cb5-15" title="15">fitControl &lt;-<span class="st"> </span>caret<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/caret/topics/trainControl">trainControl</a></span>(<span class="co">## 5-fold CV</span></a>
<a class="sourceLine" id="cb5-16" title="16">                           <span class="dt">method =</span> <span class="st">"repeatedcv"</span>,</a>
<a class="sourceLine" id="cb5-17" title="17">                           <span class="dt">number =</span> <span class="dv">5</span>,</a>
<a class="sourceLine" id="cb5-18" title="18">                           <span class="co">## repeated ten times</span></a>
<a class="sourceLine" id="cb5-19" title="19">                           <span class="dt">repeats =</span> <span class="dv">10</span>,</a>
<a class="sourceLine" id="cb5-20" title="20">                           <span class="dt">classProbs =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb5-21" title="21">                           <span class="dt">returnData =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb5-22" title="22">                           <span class="dt">trim=</span><span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb5-23" title="23">                           <span class="dt">allowParallel =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb5-24" title="24"><span class="co"># Set up parallel</span></a>
<a class="sourceLine" id="cb5-25" title="25">cluster &lt;-<span class="st"> </span><span class="kw">makeCluster</span>(<span class="kw">detectCores</span>() <span class="op">-</span><span class="st"> </span><span class="dv">1</span>) <span class="co"># convention to leave 1 core for OS</span></a>
<a class="sourceLine" id="cb5-26" title="26"><span class="kw">registerDoParallel</span>(cluster)</a></code></pre></div>
</div>
<div id="training" class="section level3">
<h3 class="hasAnchor">
<a href="#training" class="anchor"></a>Training</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="co"># Training</span></a>
<a class="sourceLine" id="cb6-2" title="2">model_tree &lt;-<span class="st"> </span>caret<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/caret/topics/train">train</a></span>(Distribution <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> train, </a>
<a class="sourceLine" id="cb6-3" title="3">                 <span class="dt">method =</span> <span class="st">"rpart"</span>, </a>
<a class="sourceLine" id="cb6-4" title="4">                 <span class="dt">trControl =</span> fitControl)</a>
<a class="sourceLine" id="cb6-5" title="5">model_rf &lt;-<span class="st"> </span>caret<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/caret/topics/train">train</a></span>(Distribution <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> train, </a>
<a class="sourceLine" id="cb6-6" title="6">                 <span class="dt">method =</span> <span class="st">"rf"</span>, </a>
<a class="sourceLine" id="cb6-7" title="7">                 <span class="dt">trControl =</span> fitControl)</a>
<a class="sourceLine" id="cb6-8" title="8">model_nb &lt;-<span class="st"> </span>caret<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/caret/topics/train">train</a></span>(Distribution <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> train,</a>
<a class="sourceLine" id="cb6-9" title="9">                 <span class="dt">method =</span> <span class="st">"naive_bayes"</span>,</a>
<a class="sourceLine" id="cb6-10" title="10">                 <span class="dt">trControl =</span> fitControl)</a>
<a class="sourceLine" id="cb6-11" title="11"></a>
<a class="sourceLine" id="cb6-12" title="12"><span class="kw">stopCluster</span>(cluster) <span class="co"># explicitly shut down the cluster</span></a></code></pre></div>
</div>
</div>
<div id="model-selection" class="section level2">
<h2 class="hasAnchor">
<a href="#model-selection" class="anchor"></a>Model Selection</h2>
<div id="model-comparison" class="section level3">
<h3 class="hasAnchor">
<a href="#model-comparison" class="anchor"></a>Model Comparison</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="co"># collect resamples</span></a>
<a class="sourceLine" id="cb7-2" title="2">results &lt;-<span class="st"> </span><span class="kw">resamples</span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(</a>
<a class="sourceLine" id="cb7-3" title="3">  <span class="st">"DecisionTree"</span> =<span class="st"> </span>model_tree,</a>
<a class="sourceLine" id="cb7-4" title="4">  <span class="st">"RandomForest"</span> =<span class="st"> </span>model_rf,</a>
<a class="sourceLine" id="cb7-5" title="5">  <span class="st">"NaiveBayes"</span>=<span class="st"> </span>model_nb</a>
<a class="sourceLine" id="cb7-6" title="6">  ))</a>
<a class="sourceLine" id="cb7-7" title="7"></a>
<a class="sourceLine" id="cb7-8" title="8"><span class="co"># summarize the distributions</span></a>
<a class="sourceLine" id="cb7-9" title="9"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary</a></span>(results)</a>
<a class="sourceLine" id="cb7-10" title="10"></a>
<a class="sourceLine" id="cb7-11" title="11"><span class="co"># dot plots of results</span></a>
<a class="sourceLine" id="cb7-12" title="12"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/graphics-defunct">dotplot</a></span>(results)</a>
<a class="sourceLine" id="cb7-13" title="13"></a>
<a class="sourceLine" id="cb7-14" title="14"><span class="co"># Sizes</span></a>
<a class="sourceLine" id="cb7-15" title="15"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(<span class="st">"DecisionTree"</span> =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/numeric">as.numeric</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/object.size">object.size</a></span>(model_tree))<span class="op">/</span><span class="dv">1000</span>,</a>
<a class="sourceLine" id="cb7-16" title="16">           <span class="st">"RandomForest"</span> =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/numeric">as.numeric</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/object.size">object.size</a></span>(model_rf))<span class="op">/</span><span class="dv">1000</span>,</a>
<a class="sourceLine" id="cb7-17" title="17">           <span class="st">"NaiveBayes"</span> =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/numeric">as.numeric</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/object.size">object.size</a></span>(model_nb))<span class="op">/</span><span class="dv">1000</span>)</a></code></pre></div>
</div>
<div id="best-model-inspection" class="section level3">
<h3 class="hasAnchor">
<a href="#best-model-inspection" class="anchor"></a>Best Model Inspection</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">model &lt;-<span class="st"> </span>model_rf</a>
<a class="sourceLine" id="cb8-2" title="2"></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="co"># Performance</span></a>
<a class="sourceLine" id="cb8-4" title="4">test<span class="op">$</span>pred &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/predict">predict</a></span>(model, test)</a>
<a class="sourceLine" id="cb8-5" title="5">confusion &lt;-<span class="st"> </span><span class="kw">confusionMatrix</span>(<span class="dt">data =</span> test<span class="op">$</span>pred, <span class="dt">reference =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">as.factor</a></span>(test<span class="op">$</span>Distribution), <span class="dt">mode =</span> <span class="st">"prec_recall"</span>)</a>
<a class="sourceLine" id="cb8-6" title="6">knitr<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/knitr/topics/kable">kable</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(<span class="st">"Performance"</span> =<span class="st"> </span>confusion<span class="op">$</span>overall))</a>
<a class="sourceLine" id="cb8-7" title="7"></a>
<a class="sourceLine" id="cb8-8" title="8"><span class="co"># Prediction Table</span></a>
<a class="sourceLine" id="cb8-9" title="9">knitr<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/knitr/topics/kable">kable</a></span>(confusion<span class="op">$</span>table <span class="op">/</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/colSums">colSums</a></span>(confusion<span class="op">$</span>table), <span class="dt">digits=</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb8-10" title="10"></a>
<a class="sourceLine" id="cb8-11" title="11"><span class="co"># Prediction Figure</span></a>
<a class="sourceLine" id="cb8-12" title="12">perf &lt;-<span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.data.frame">as.data.frame</a></span>(confusion<span class="op">$</span>byClass)[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"Sensitivity"</span>, <span class="st">"Specificity"</span>)]</a>
<a class="sourceLine" id="cb8-13" title="13">perf<span class="op">$</span>Distribution &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/grep">gsub</a></span>(<span class="st">"Class: "</span>, <span class="st">""</span>, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/row.names">row.names</a></span>(perf))</a>
<a class="sourceLine" id="cb8-14" title="14">perf &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/reshape">reshape</a></span>(perf, <span class="dt">varying =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"Sensitivity"</span>, <span class="st">"Specificity"</span>)), <span class="dt">timevar =</span> <span class="st">"Type"</span>, <span class="dt">idvar =</span> <span class="st">"Distribution"</span>, <span class="dt">direction =</span> <span class="st">"long"</span>, <span class="dt">v.names =</span> <span class="st">"Metric"</span>)</a>
<a class="sourceLine" id="cb8-15" title="15">perf<span class="op">$</span>Type &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/ifelse">ifelse</a></span>(perf<span class="op">$</span>Type <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="st">"Sensitivity"</span>, <span class="st">"Specificity"</span>)</a>
<a class="sourceLine" id="cb8-16" title="16"><span class="kw">ggplot</span>(perf, <span class="kw">aes</span>(<span class="dt">x=</span>Distribution, <span class="dt">y=</span>Metric, <span class="dt">fill=</span>Type)) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-17" title="17"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">"identity"</span>, <span class="dt">position =</span> <span class="kw">position_dodge</span>(<span class="dt">width =</span> <span class="fl">0.9</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-18" title="18"><span class="st">  </span><span class="kw">geom_hline</span>(<span class="kw">aes</span>(<span class="dt">yintercept=</span><span class="fl">0.5</span>), <span class="dt">linetype=</span><span class="st">"dotted"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-19" title="19"><span class="st">  </span><span class="kw">theme_classic</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb8-20" title="20"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">45</span>, <span class="dt">hjust =</span> <span class="dv">1</span>))</a>
<a class="sourceLine" id="cb8-21" title="21"></a>
<a class="sourceLine" id="cb8-22" title="22"><span class="co"># Features</span></a>
<a class="sourceLine" id="cb8-23" title="23">features &lt;-<span class="st"> </span>caret<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/caret/topics/varImp">varImp</a></span>(model, <span class="dt">scale =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb8-24" title="24"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(features)</a>
<a class="sourceLine" id="cb8-25" title="25"></a>
<a class="sourceLine" id="cb8-26" title="26"><span class="co"># N trees</span></a>
<a class="sourceLine" id="cb8-27" title="27"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(model<span class="op">$</span>finalModel, <span class="dt">log=</span><span class="st">"x"</span>, <span class="dt">main=</span><span class="st">"black default, red samplesize, green tree depth"</span>)</a></code></pre></div>
</div>
</div>
<div id="random-forest-training-with-feature-selection" class="section level2">
<h2 class="hasAnchor">
<a href="#random-forest-training-with-feature-selection" class="anchor"></a>Random Forest Training with Feature Selection</h2>
<div id="data-generation-1" class="section level3">
<h3 class="hasAnchor">
<a href="#data-generation-1" class="anchor"></a>Data Generation</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">df &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>()</a>
<a class="sourceLine" id="cb9-2" title="2"><span class="cf">for</span>(distribution <span class="cf">in</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"normal"</span>, <span class="st">"beta"</span>, <span class="st">"binomial"</span>, <span class="st">"chi"</span>, <span class="st">"exponential"</span>, <span class="st">"F"</span>, <span class="st">"gamma"</span>, <span class="st">"lognormal"</span>, <span class="st">"poisson"</span>, <span class="st">"t"</span>, <span class="st">"uniform"</span>, <span class="st">"weibull"</span>)){</a>
<a class="sourceLine" id="cb9-3" title="3">  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">2000</span>){</a>
<a class="sourceLine" id="cb9-4" title="4">    </a>
<a class="sourceLine" id="cb9-5" title="5">    size &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Round">round</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Uniform">runif</a></span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">1000</span>))</a>
<a class="sourceLine" id="cb9-6" title="6">    location &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Uniform">runif</a></span>(<span class="dv">1</span>, <span class="fl">0.01</span>, <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb9-7" title="7">    scale &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Uniform">runif</a></span>(<span class="dv">1</span>, <span class="fl">0.02</span>, <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb9-8" title="8">    </a>
<a class="sourceLine" id="cb9-9" title="9">    x &lt;-<span class="st"> </span><span class="kw">generate_distribution</span>(distribution, <span class="dt">size=</span>size, <span class="dt">location=</span>location, <span class="dt">scale=</span>scale)</a>
<a class="sourceLine" id="cb9-10" title="10">    </a>
<a class="sourceLine" id="cb9-11" title="11">    x[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/is.finite">is.infinite</a></span>(x)] &lt;-<span class="st"> </span><span class="fl">5.565423e+156</span></a>
<a class="sourceLine" id="cb9-12" title="12">    x &lt;-<span class="st"> </span>parameters<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/parameters/topics/normalize">normalize</a></span>(x, <span class="dt">verbose=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb9-13" title="13">    </a>
<a class="sourceLine" id="cb9-14" title="14">    <span class="co"># Extract features</span></a>
<a class="sourceLine" id="cb9-15" title="15">    data &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(</a>
<a class="sourceLine" id="cb9-16" title="16">      <span class="st">"SD"</span> =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/sd">sd</a></span>(x),</a>
<a class="sourceLine" id="cb9-17" title="17">      <span class="st">"MAD"</span> =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/mad">mad</a></span>(x, <span class="dt">constant=</span><span class="dv">1</span>),</a>
<a class="sourceLine" id="cb9-18" title="18">      <span class="st">"Mean_Median_Distance"</span> =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(x) <span class="op">-</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/median">median</a></span>(x),</a>
<a class="sourceLine" id="cb9-19" title="19">      <span class="st">"Mean_Mode_Distance"</span> =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(x) <span class="op">-</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/numeric">as.numeric</a></span>(bayestestR<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/bayestestR/topics/map_estimate">map_estimate</a></span>(x, <span class="dt">bw =</span> <span class="st">"nrd0"</span>)),</a>
<a class="sourceLine" id="cb9-20" title="20">      <span class="st">"SD_MAD_Distance"</span> =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/sd">sd</a></span>(x) <span class="op">-</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/mad">mad</a></span>(x, <span class="dt">constant=</span><span class="dv">1</span>),</a>
<a class="sourceLine" id="cb9-21" title="21">      <span class="st">"Range"</span> =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/diff">diff</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/range">range</a></span>(x)) <span class="op">/</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/sd">sd</a></span>(x),</a>
<a class="sourceLine" id="cb9-22" title="22">      <span class="st">"IQR"</span> =<span class="st"> </span>stats<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/IQR">IQR</a></span>(x),</a>
<a class="sourceLine" id="cb9-23" title="23">      <span class="st">"Skewness"</span> =<span class="st"> </span><span class="kw">skewness</span>(x),</a>
<a class="sourceLine" id="cb9-24" title="24">      <span class="st">"Kurtosis"</span> =<span class="st"> </span><span class="kw">kurtosis</span>(x),</a>
<a class="sourceLine" id="cb9-25" title="25">      <span class="st">"Uniques"</span> =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/unique">unique</a></span>(x)) <span class="op">/</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(x)</a>
<a class="sourceLine" id="cb9-26" title="26">    )</a>
<a class="sourceLine" id="cb9-27" title="27">    </a>
<a class="sourceLine" id="cb9-28" title="28">    </a>
<a class="sourceLine" id="cb9-29" title="29">    <span class="cf">if</span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/unique">unique</a></span>(x)) <span class="op">==</span><span class="st"> </span><span class="dv">1</span>){</a>
<a class="sourceLine" id="cb9-30" title="30">      data<span class="op">$</span>Distribution &lt;-<span class="st"> "uniform"</span></a>
<a class="sourceLine" id="cb9-31" title="31">    } <span class="cf">else</span>{</a>
<a class="sourceLine" id="cb9-32" title="32">      data<span class="op">$</span>Distribution &lt;-<span class="st"> </span>distribution</a>
<a class="sourceLine" id="cb9-33" title="33">    }</a>
<a class="sourceLine" id="cb9-34" title="34">    df &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(df, data)</a>
<a class="sourceLine" id="cb9-35" title="35">  }</a>
<a class="sourceLine" id="cb9-36" title="36">}</a></code></pre></div>
</div>
<div id="preparation-1" class="section level3">
<h3 class="hasAnchor">
<a href="#preparation-1" class="anchor"></a>Preparation</h3>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="co"># Data clearning</span></a>
<a class="sourceLine" id="cb10-2" title="2">df &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/na.fail">na.omit</a></span>(df)</a>
<a class="sourceLine" id="cb10-3" title="3">infinite &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/is.finite">is.infinite</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/colSums">rowSums</a></span>(df[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">sapply</a></span>(df, is.numeric)]))</a>
<a class="sourceLine" id="cb10-4" title="4">df &lt;-<span class="st"> </span>df[<span class="op">!</span>infinite, ]</a>
<a class="sourceLine" id="cb10-5" title="5"></a>
<a class="sourceLine" id="cb10-6" title="6"><span class="co"># Data partitioning</span></a>
<a class="sourceLine" id="cb10-7" title="7">trainIndex &lt;-<span class="st"> </span>caret<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/caret/topics/createDataPartition">createDataPartition</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">as.factor</a></span>(df<span class="op">$</span>Distribution), <span class="dt">p=</span><span class="fl">0.1</span>, <span class="dt">list =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb10-8" title="8">train &lt;-<span class="st"> </span>df[ trainIndex,]</a>
<a class="sourceLine" id="cb10-9" title="9">test  &lt;-<span class="st"> </span>df[<span class="op">-</span>trainIndex,]</a>
<a class="sourceLine" id="cb10-10" title="10"></a>
<a class="sourceLine" id="cb10-11" title="11"><span class="co"># Set up parallel</span></a>
<a class="sourceLine" id="cb10-12" title="12">cluster &lt;-<span class="st"> </span><span class="kw">makeCluster</span>(<span class="kw">detectCores</span>() <span class="op">-</span><span class="st"> </span><span class="dv">1</span>) <span class="co"># convention to leave 1 core for OS</span></a>
<a class="sourceLine" id="cb10-13" title="13"><span class="kw">registerDoParallel</span>(cluster)</a></code></pre></div>
</div>
<div id="training-1" class="section level3">
<h3 class="hasAnchor">
<a href="#training-1" class="anchor"></a>Training</h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="co"># Training</span></a>
<a class="sourceLine" id="cb11-2" title="2">model &lt;-<span class="st"> </span>randomForest<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/randomForest/topics/randomForest">randomForest</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">as.factor</a></span>(Distribution) <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> train, </a>
<a class="sourceLine" id="cb11-3" title="3">                 <span class="dt">localImp =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb11-4" title="4">                 <span class="dt">importance =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb11-5" title="5">                 <span class="dt">keep.forest =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb11-6" title="6">                 <span class="dt">keep.inbag =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb11-7" title="7">                 <span class="dt">proximity=</span><span class="ot">FALSE</span>, </a>
<a class="sourceLine" id="cb11-8" title="8">                 <span class="dt">maxDepth=</span><span class="dv">5</span>, </a>
<a class="sourceLine" id="cb11-9" title="9">                 <span class="dt">maxBins=</span><span class="dv">32</span>, </a>
<a class="sourceLine" id="cb11-10" title="10">                 <span class="dt">minInstancesPerNode=</span><span class="dv">1</span>, </a>
<a class="sourceLine" id="cb11-11" title="11">                 <span class="dt">minInfoGain=</span><span class="fl">0.0</span>, </a>
<a class="sourceLine" id="cb11-12" title="12">                 <span class="dt">maxMemoryInMB=</span><span class="dv">128</span>,</a>
<a class="sourceLine" id="cb11-13" title="13">                 <span class="dt">ntree =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb11-14" title="14"><span class="kw">stopCluster</span>(cluster) <span class="co"># explicitly shut down the cluster</span></a></code></pre></div>
</div>
<div id="model-inspecction" class="section level3">
<h3 class="hasAnchor">
<a href="#model-inspecction" class="anchor"></a>Model Inspecction</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="co"># Performance</span></a>
<a class="sourceLine" id="cb12-2" title="2">test<span class="op">$</span>pred &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/predict">predict</a></span>(model, test)</a>
<a class="sourceLine" id="cb12-3" title="3">confusion &lt;-<span class="st"> </span><span class="kw">confusionMatrix</span>(<span class="dt">data =</span> test<span class="op">$</span>pred, <span class="dt">reference =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">as.factor</a></span>(test<span class="op">$</span>Distribution), <span class="dt">mode =</span> <span class="st">"prec_recall"</span>)</a>
<a class="sourceLine" id="cb12-4" title="4">knitr<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/knitr/topics/kable">kable</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(<span class="st">"Performance"</span> =<span class="st"> </span>confusion<span class="op">$</span>overall))</a>
<a class="sourceLine" id="cb12-5" title="5"></a>
<a class="sourceLine" id="cb12-6" title="6"><span class="co"># Prediction Table</span></a>
<a class="sourceLine" id="cb12-7" title="7">knitr<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/knitr/topics/kable">kable</a></span>(confusion<span class="op">$</span>table <span class="op">/</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/colSums">colSums</a></span>(confusion<span class="op">$</span>table), <span class="dt">digits=</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb12-8" title="8"></a>
<a class="sourceLine" id="cb12-9" title="9"><span class="co"># Prediction Figure</span></a>
<a class="sourceLine" id="cb12-10" title="10">perf &lt;-<span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.data.frame">as.data.frame</a></span>(confusion<span class="op">$</span>byClass)[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"Sensitivity"</span>, <span class="st">"Specificity"</span>)]</a>
<a class="sourceLine" id="cb12-11" title="11">perf<span class="op">$</span>Distribution &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/grep">gsub</a></span>(<span class="st">"Class: "</span>, <span class="st">""</span>, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/row.names">row.names</a></span>(perf))</a>
<a class="sourceLine" id="cb12-12" title="12">perf &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/reshape">reshape</a></span>(perf, <span class="dt">varying =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"Sensitivity"</span>, <span class="st">"Specificity"</span>)), <span class="dt">timevar =</span> <span class="st">"Type"</span>, <span class="dt">idvar =</span> <span class="st">"Distribution"</span>, <span class="dt">direction =</span> <span class="st">"long"</span>, <span class="dt">v.names =</span> <span class="st">"Metric"</span>)</a>
<a class="sourceLine" id="cb12-13" title="13">perf<span class="op">$</span>Type &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/ifelse">ifelse</a></span>(perf<span class="op">$</span>Type <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="st">"Sensitivity"</span>, <span class="st">"Specificity"</span>)</a>
<a class="sourceLine" id="cb12-14" title="14"><span class="kw">ggplot</span>(perf, <span class="kw">aes</span>(<span class="dt">x=</span>Distribution, <span class="dt">y=</span>Metric, <span class="dt">fill=</span>Type)) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-15" title="15"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">"identity"</span>, <span class="dt">position =</span> <span class="kw">position_dodge</span>(<span class="dt">width =</span> <span class="fl">0.9</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-16" title="16"><span class="st">  </span><span class="kw">geom_hline</span>(<span class="kw">aes</span>(<span class="dt">yintercept=</span><span class="fl">0.5</span>), <span class="dt">linetype=</span><span class="st">"dotted"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-17" title="17"><span class="st">  </span><span class="kw">theme_classic</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb12-18" title="18"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">45</span>, <span class="dt">hjust =</span> <span class="dv">1</span>))</a>
<a class="sourceLine" id="cb12-19" title="19"><span class="co"># Features</span></a>
<a class="sourceLine" id="cb12-20" title="20">caret<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/caret/topics/varImp">varImp</a></span>(model, <span class="dt">scale =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
</div>
<div id="reduce-size-and-save" class="section level3">
<h3 class="hasAnchor">
<a href="#reduce-size-and-save" class="anchor"></a>Reduce Size and Save</h3>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1"><span class="co"># Initial size</span></a>
<a class="sourceLine" id="cb13-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/numeric">as.numeric</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/object.size">object.size</a></span>(model))<span class="op">/</span><span class="dv">1000</span></a>
<a class="sourceLine" id="cb13-3" title="3"></a>
<a class="sourceLine" id="cb13-4" title="4"></a>
<a class="sourceLine" id="cb13-5" title="5"><span class="co"># Reduce size</span></a>
<a class="sourceLine" id="cb13-6" title="6">model &lt;-<span class="st"> </span><span class="kw">strip</span>(model, <span class="dt">keep=</span><span class="st">"predict"</span>, <span class="dt">use_trim=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb13-7" title="7"></a>
<a class="sourceLine" id="cb13-8" title="8">model<span class="op">$</span>predicted &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb13-9" title="9">model<span class="op">$</span>y &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb13-10" title="10">model<span class="op">$</span>err.rate &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb13-11" title="11">model<span class="op">$</span>test &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb13-12" title="12">model<span class="op">$</span>proximity &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb13-13" title="13">model<span class="op">$</span>confusion &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb13-14" title="14">model<span class="op">$</span>localImportance &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb13-15" title="15">model<span class="op">$</span>importanceSD &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb13-16" title="16">model<span class="op">$</span>inbag &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb13-17" title="17">model<span class="op">$</span>votes &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb13-18" title="18">model<span class="op">$</span>oob.times &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb13-19" title="19"></a>
<a class="sourceLine" id="cb13-20" title="20"></a>
<a class="sourceLine" id="cb13-21" title="21"></a>
<a class="sourceLine" id="cb13-22" title="22"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/numeric">as.numeric</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/object.size">object.size</a></span>(model))<span class="op">/</span><span class="dv">1000</span></a>
<a class="sourceLine" id="cb13-23" title="23"></a>
<a class="sourceLine" id="cb13-24" title="24"><span class="co"># Test </span></a>
<a class="sourceLine" id="cb13-25" title="25"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">is.factor</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/predict">predict</a></span>(model, df))</a>
<a class="sourceLine" id="cb13-26" title="26"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">is.matrix</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/predict">predict</a></span>(model, data, <span class="dt">type =</span> <span class="st">"prob"</span>))</a></code></pre></div>
</div>
</div>
</div>
<div id="references" class="section level1">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<table class="table">
<thead><tr class="header">
<th align="left">Package</th>
<th align="left">Version</th>
<th align="left">References</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">bayestestR</td>
<td align="left">0.2.0</td>
<td align="left">Makowski, D., Ben-Shachar M. S. &amp; LÃ¼decke, D. (2019). Understand and Describe Bayesian Models and Posterior Distributions using bayestestR. CRAN. Available from <a href="https://github.com/easystats/bayestestR" class="uri">https://github.com/easystats/bayestestR</a>. DOI: 10.5281/zenodo.2556486.</td>
</tr>
<tr class="even">
<td align="left">caret</td>
<td align="left">6.0.84</td>
<td align="left">Max Kuhn. Contributions from Jed Wing, Steve Weston, Andre Williams, Chris Keefer, Allan Engelhardt, Tony Cooper, Zachary Mayer, Brenton Kenkel, the R Core Team, Michael Benesty, Reynald Lescarbeau, Andrew Ziem, Luca Scrucca, Yuan Tang, Can Candan and Tyler Hunt. (2019). caret: Classification and Regression Training. R package version 6.0-84. <a href="https://CRAN.R-project.org/package=caret" class="uri">https://CRAN.R-project.org/package=caret</a>
</td>
</tr>
<tr class="odd">
<td align="left">doParallel</td>
<td align="left">1.0.14</td>
<td align="left">Microsoft Corporation and Steve Weston (2018). doParallel: Foreach Parallel Adaptor for the â€˜parallelâ€™ Package. R package version 1.0.14. <a href="https://CRAN.R-project.org/package=doParallel" class="uri">https://CRAN.R-project.org/package=doParallel</a>
</td>
</tr>
<tr class="even">
<td align="left">foreach</td>
<td align="left">1.4.4</td>
<td align="left">Microsoft and Steve Weston (2017). foreach: Provides Foreach Looping Construct for R. R package version 1.4.4. <a href="https://CRAN.R-project.org/package=foreach" class="uri">https://CRAN.R-project.org/package=foreach</a>
</td>
</tr>
<tr class="odd">
<td align="left">ggplot2</td>
<td align="left">3.1.1</td>
<td align="left">H. Wickham. ggplot2: Elegant Graphics for Data Analysis. Springer-Verlag New York, 2016.</td>
</tr>
<tr class="even">
<td align="left">iterators</td>
<td align="left">1.0.10</td>
<td align="left">Revolution Analytics and Steve Weston (2018). iterators: Provides Iterator Construct for R. R package version 1.0.10. <a href="https://CRAN.R-project.org/package=iterators" class="uri">https://CRAN.R-project.org/package=iterators</a>
</td>
</tr>
<tr class="odd">
<td align="left">lattice</td>
<td align="left">0.20.38</td>
<td align="left">Sarkar, Deepayan (2008) Lattice: Multivariate Data Visualization with R. Springer, New York. ISBN 978-0-387-75968-5</td>
</tr>
<tr class="even">
<td align="left">parameters</td>
<td align="left">0.1.0</td>
<td align="left">Makowski, D. &amp; LÃ¼decke, D. (2019). The report package for R: Ensuring the use of best practices for results reporting. CRAN. Available from <a href="https://github.com/easystats/report" class="uri">https://github.com/easystats/report</a>. doi: .</td>
</tr>
<tr class="odd">
<td align="left">report</td>
<td align="left">0.1.0</td>
<td align="left">Makowski, D. &amp; LÃ¼decke, D. (2019). The report package for R: Ensuring the use of best practices for results reporting. CRAN. Available from <a href="https://github.com/easystats/report" class="uri">https://github.com/easystats/report</a>. doi: .</td>
</tr>
<tr class="even">
<td align="left">strip</td>
<td align="left">1.0.0</td>
<td align="left">Paul Poncet (2018). strip: Lighten your R Model Outputs. R package version 1.0.0. <a href="https://CRAN.R-project.org/package=strip" class="uri">https://CRAN.R-project.org/package=strip</a>
</td>
</tr>
</tbody>
</table>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li>
<a href="#methods">Methods</a><ul class="nav nav-pills nav-stacked">
<li><a href="#parameters-and-packages">Parameters and Packages</a></li>
      <li><a href="#visualisation-of-distributions">Visualisation of distributions</a></li>
      </ul>
</li>
      <li>
<a href="#results">Results</a><ul class="nav nav-pills nav-stacked">
<li><a href="#model-training">Model training</a></li>
      <li><a href="#model-selection">Model Selection</a></li>
      <li><a href="#random-forest-training-with-feature-selection">Random Forest Training with Feature Selection</a></li>
      </ul>
</li>
      <li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://dominiquemakowski.github.io/">Dominique Makowski</a>, <a href="https://github.com/strengejacke">Daniel LÃ¼decke</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
